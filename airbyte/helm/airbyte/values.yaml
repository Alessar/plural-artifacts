# Default values for airbyte.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

global:
  imageRegistry: dkr.plural.sh/airbyte

replicaCount: 1

postgres:
  replicas: 1
  storage:
    size: 25Gi
  resources: {}
  default:
    resources:
      requests:
        cpu: 100m
        memory: 100Mi
      limits:
        cpu: '2'
        memory: 1Gi

oidcProxy:
  enabled: false

airbyte:
  postgresql:
    enabled: false
  minio:
    enabled: false

  temporal:
    extraEnv:
    - name: SQL_TLS_ENABLED
      value: 'true'
  
  externalDatabase:
    database: airbyte
    host: plural-airbyte
    existingSecret: airbyte.plural-airbyte.credentials.postgresql.acid.zalan.do
    existingSecretPasswordKey: password
    user: airbyte

  webapp:
    ingress:
      enabled: true
      className: nginx
      annotations:
        kubernetes.io/tls-acme: "true"
        # kubernetes.io/ingress.class: "nginx"
        cert-manager.io/cluster-issuer: letsencrypt-prod
        # Extend timeout to allow long running queries.
        nginx.ingress.kubernetes.io/proxy-connect-timeout: "300"
        nginx.ingress.kubernetes.io/proxy-read-timeout: "300"
        nginx.ingress.kubernetes.io/proxy-send-timeout: "300"
        nginx.ingress.kubernetes.io/force-ssl-redirect: 'true'
        nginx.ingress.kubernetes.io/use-regex: "true"