external-dns:
  serviceAccount:
    name: external-dns
    create: true
  image:
    registry: dkr.plural.sh
    repository: bootstrap/external-dns
    tag: v0.7.6
    pullPolicy: Always
    pullSecrets:
    - plural-creds
  sources:
  - service
  - ingress
  provider: google
  txtOwnerId: piazza
  policy: sync
  rbac:
    create: true
    serviceAccountName: external-dns
  domainFilters:
  - piazzaapp.com

ownerEmail: mguarino46@gmail.com
provider: aws

imagePullSecrets:
- name: plural-creds

application:
  registry: dkr.plural.sh/bootstrap
  tag: v0.8.3

autoscaling:
  ingress:
    minReplicas: 1
    maxReplicas: 11
    targetCPUUtilizationPercentage: 50

loki-stack:
  grafana:
    enabled: false
    sidecar:
      image: {}
      notifiers:
        enabled: false
    imageRenderer:
      enabled: false

aws-load-balancer-controller:
  enabled: false

ingress-nginx:
  controller:
    admissionWebhooks:
      enabled: false
    service:
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-backend-protocol: tcp
        service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: 'true'
        service.beta.kubernetes.io/aws-load-balancer-type: nlb-ip
        service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"
        service.beta.kubernetes.io/aws-load-balancer-connection-idle-timeout: '3600'
    config:
      worker-shutdown-timeout: 240s
      proxy-body-size: '0'
      proxy-read-timeout: '3600'
      proxy-send-timeout: '3600'
grafana:
  grafana.ini:
    security:
      allow_embedding: true
  admin:
    existingSecret: grafana-credentials
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
      - name: default
        orgId: 1
        folder: ''
        type: file
        updateIntervalSeconds: 10
        disableDeletion: true
        editable: true
        options:
          path: /var/lib/grafana/dashboards/default
      - name: sidecar
        orgId: 1
        folder: ''
        type: file
        updateIntervalSeconds: 10
        disableDeletion: true
        editable: true
        options:
          path: /var/lib/grafana/dashboards/sidecar
  dashboards:
    default:
      kubernetes-overview:
        gnetId: 10856
        revision: 1
        uid: 'kubernetes-overview'
        datasource: Prometheus
      kubernetes-deepdive:
        gnetId: 8588
        revision: 1
        uid: 'kubernetes-deepdive'
        datasource: Prometheus
      node-overview:
        gnetId: 1860
        revision: 16
        uid: 'node-overview'
        datasource: Prometheus
  service:
    type: NodePort
  persistence:
    enabled: true
  sidecar:
    dashboards:
      provider:
        name: sidecar
        allowUiUpdates: true
      enabled: true
      searchNamespace: ALL
    datasources:
      enabled: true
      searchNamespace: ALL
  ingress:
    enabled: true
    path: /.*
    annotations:
      kubernetes.io/tls-acme: "true"
      kubernetes.io/ingress.class: "nginx"
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/force-ssl-redirect: 'true'
      nginx.ingress.kubernetes.io/use-regex: "true"

kube-prometheus-stack:
  fullnameOverride: "bootstrap"
  grafana:
    enabled: false
  prometheus:
    labels:
      app.kubernetes.io/managed-by: Helm
    service:
      labels:
        app.kubernetes.io/managed-by: Helm
    prometheusSpec:
      podMetadata:
        labels:
          app.kubernetes.io/managed-by: Helm
      ruleNamespaceSelector:
        matchLabels:
          app.kubernetes.io/managed-by: plural
      ruleSelector:
        matchLabels:
          app.kubernetes.io/managed-by:  Helm
      serviceMonitorNamespaceSelector:
        matchLabels:
          app.kubernetes.io/managed-by: plural
      serviceMonitorSelector:
        matchLabels:
          app.kubernetes.io/managed-by:  Helm
      podMonitorNamespaceSelector:
        matchLabels:
          app.kubernetes.io/managed-by: plural
      podMonitorSelector:
        matchLabels:
          app.kubernetes.io/managed-by:  Helm
      probeNamespaceSelector:
        matchLabels:
          app.kubernetes.io/managed-by: plural
      probeSelector:
        matchLabels:
          app.kubernetes.io/managed-by:  Helm

prometheus:
  server:
    statefulSet:
      enabled: true

cluster-autoscaler:
  enabled: false

metrics-server:
  enabled: false
  apiService:
    create: true