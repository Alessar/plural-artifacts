external-dns:
  serviceAccount:
    name: external-dns
    create: true
  image:
    registry: dkr.plural.sh
    repository: bootstrap/external-dns
    tag: v0.7.6
    pullPolicy: Always
    pullSecrets:
    - plural-creds
  sources:
  - service
  - ingress
  - istio-gateway
  - istio-virtualservice
  provider: google
  txtOwnerId: piazza
  policy: sync
  rbac:
    create: true
    serviceAccountName: external-dns
  domainFilters:
  - pluralsh.com

ownerEmail: mguarino46@gmail.com
provider: aws

imagePullSecrets:
- name: plural-creds

application:
  registry: dkr.plural.sh/bootstrap
  tag: v0.8.3

dnsSolver:
  route53:
    region: us-east-1

autoscaling:
  ingress:
    minReplicas: 1
    maxReplicas: 11
    targetCPUUtilizationPercentage: 50

aws-load-balancer-controller:
  enabled: false

ingress-nginx:
  controller:
    admissionWebhooks:
      enabled: false
    service:
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing
        service.beta.kubernetes.io/aws-load-balancer-backend-protocol: tcp
        service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: 'true'
        service.beta.kubernetes.io/aws-load-balancer-type: external
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip
        service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"
        service.beta.kubernetes.io/aws-load-balancer-connection-idle-timeout: '3600'
    config:
      worker-shutdown-timeout: 240s
      proxy-body-size: '0'
      proxy-read-timeout: '3600'
      proxy-send-timeout: '3600'
    metrics:
      enabled: true
      service:
        annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "10254"
        prometheus.io/path: "/metrics"
        prometheus.io/scheme: http
      serviceMonitor:
        enabled: true
      prometheusRule:
        enabled: false

cert-manager:
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true
  securityContext:
    fsGroup: 1000
    runAsNonRoot: true
  podLabels:
    aadpodidbinding: externaldns # grants the same permissions needed for cert-manager

kubed:
  operator:
    registry: gcr.io/pluralsh/appscode

cluster-autoscaler:
  enabled: false
  extraArgs:
    "scale-down-utilization-threshold": 0.75
  serviceMonitor:
    enabled: true
    namespace: ""

metrics-server:
  enabled: false
  image:
    registry: gcr.io/pluralsh
    tag: 0.4.4-debian-10-r0
  apiService:
    create: true
